/* Reset and base */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root{
  --primary: #4285F4;        /* headings, icons, selected tabs */
  --primary-hover:#3367d6;
  --success:#34a853;
  --warning:#fbbc05;
  --error:#ea4335;

  --logo-text:#464948;        /* “Bills” wordmark */
  --text:#202124;
  --muted:#5f6368;

  --bg:#f8f9fa;
  --panel:#ffffff;
  --panel-2:#f1f3f4;
  --border:#dadce0;

  --shadow-1:0 1px 3px rgba(60,64,67,.3);
  --shadow-2:0 2px 10px rgba(60,64,67,.15);
  --shadow-3:0 10px 30px rgba(60,64,67,.18);

  --r4:4px; --r8:8px; --r12:12px;
  --t: all .25s cubic-bezier(.4,0,.2,1);

  color-scheme: light;
}

@media (prefers-color-scheme: dark){
  :root{
    --text:#e8eaed;
    --muted:#9aa0a6;
    --bg:#1f2022;
    --panel:#202124;
    --panel-2:#303134;
    --border:#5f6368;
    color-scheme: dark;
  }
}

html,body{height:100%}
body{
  font-family:'Product Sans', -apple-system, BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  line-height:1.6;
  overflow-x:hidden;
}

/* Header / Nav */
.header{
  position:sticky; top:0; z-index:1000;
  background:var(--panel);
  border-bottom:1px solid var(--border);
  box-shadow:var(--shadow-1);
}
.nav-container{
  max-width:1440px; margin:0 auto;
  height:64px; padding:0 24px;
  display:flex; align-items:center; justify-content:space-between;
}
.logo-section{display:flex;align-items:center;gap:12px}
.logo-icon{width:32px;height:32px;border-radius:var(--r4)}
.logo-text{font-size:22px;font-weight:800;color:var(--logo-text)}
.nav-menu{display:flex;gap:8px}
.nav-link{
  display:flex;align-items:center;gap:8px;
  padding:8px 16px;border-radius:var(--r8);
  color:var(--muted); text-decoration:none; transition:var(--t);
  font-weight:600;
}
.nav-link i{color:var(--muted);transition:var(--t)}
.nav-link:hover{background:var(--panel-2);color:var(--primary)}
.nav-link:hover i{color:var(--primary)}
.nav-link.active{background:var(--primary);color:#fff}
.nav-link.active i{color:#fff}

/* Page layout */
.main-content{max-width:1440px;margin:0 auto;padding:24px}
.content-section{display:none}
.content-section.active{display:block}

/* Section titles */
.section-header{
  display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;
}
.section-title{
  display:flex;align-items:center;gap:10px;
  font-size:28px;font-weight:800;color:var(--primary);
}
.section-title i{color:var(--primary)}
.section-actions{display:flex;align-items:center;gap:12px}

/* Buttons */
.btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:10px 18px;border-radius:var(--r8);
  border:1px solid var(--border);
  background:var(--panel); color:var(--text);
  font-weight:700; cursor:pointer; transition:var(--t);
}
.btn:hover{background:var(--panel-2);transform:translateY(-1px)}
.btn-primary{background:var(--primary);border-color:var(--primary);color:#fff}
.btn-primary:hover{background:var(--primary-hover);box-shadow:var(--shadow-2)}
.btn-secondary{background:var(--panel)}
.btn-success{background:var(--success);border-color:var(--success);color:#fff}
.btn-success:hover{filter:brightness(.95)}

/* Inputs (global) */
.form-input, .filter-select, select, input[type="date"], input[type="number"], input[type="email"], input[type="tel"], input[type="url"], textarea{
  width:100%; padding:11px 12px;
  border:1px solid var(--border); border-radius:var(--r8);
  background:var(--panel); color:var(--text);
  transition:var(--t); font:inherit; font-size:14px;
}
.form-input::placeholder{color:var(--muted)}
.form-input:focus, .filter-select:focus, select:focus, textarea:focus{
  outline:none; border-color:var(--primary);
  box-shadow:0 0 0 2px rgba(66,133,244,.2);
}

/* Elevated search boxes (Invoices, Inventory, Clients) */
.search-box.search-elevated{
  position:relative; display:flex; align-items:center;
  background:var(--panel); border:1px solid var(--border);
  border-radius:999px; padding:8px 14px 8px 40px;
  min-width:280px; box-shadow:0 3px 10px rgba(60,64,67,.1);
  transition:var(--t);
}
.search-box.search-elevated i{
  position:absolute; left:14px; color:var(--muted); font-size:14px;
}
.search-box .search-input{
  width:100%; border:none; background:transparent; color:var(--text);
  font:inherit; font-size:14px;
}
.search-box .search-input::placeholder{color:var(--muted)}
.search-box.search-elevated:focus-within{
  border-color:var(--primary); box-shadow:0 0 0 2px rgba(66,133,244,.17), var(--shadow-2);
}

/* Cards */
.card{background:var(--panel); border-radius:var(--r12); box-shadow:var(--shadow-1); overflow:hidden}
.card-header{
  padding:20px 24px; border-bottom:1px solid var(--border);
  display:flex; align-items:center; justify-content:space-between;
}
.card-title{display:flex;align-items:center;gap:8px;color:var(--primary);font-weight:800}
.card-title i{color:var(--primary)}
.view-all-link{color:var(--primary);text-decoration:none;font-weight:700}
.view-all-link:hover{text-decoration:underline}

/* Stats */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:32px}
.stat-card{display:flex;gap:16px;align-items:center;background:var(--panel);padding:24px;border-radius:var(--r12);transition:var(--t)}
.stat-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-2)}
.stat-icon{width:48px;height:48px;border-radius:var(--r8);display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--primary),var(--success));color:#fff}
.stat-number{font-size:24px;font-weight:900;color:var(--text)}
.stat-label{font-size:14px;color:var(--muted)}
.stat-change{font-size:12px;font-weight:800}
.stat-change.positive{color:var(--success)}
.stat-change.negative{color:var(--error)}

/* Dashboard columns */
.dashboard-content{display:grid;grid-template-columns:2fr 1fr;gap:24px}

/* Invoice list (dashboard) */
.invoice-list .invoice-item{
  display:flex;align-items:center;padding:16px 24px;border-bottom:1px solid var(--border);
  transition:var(--t);
}
.invoice-item:last-child{border-bottom:none}
.invoice-item:hover{background:var(--panel-2)}
.invoice-info{flex:1}
.invoice-number{font-weight:800;color:var(--text)}
.invoice-client{font-size:14px;color:var(--muted)}
.invoice-amount{min-width:100px;text-align:right;font-weight:800;color:var(--text);margin-right:16px}
.invoice-status{
  padding:4px 12px;border-radius:20px;font-size:12px;font-weight:800;min-width:84px;text-align:center;text-transform:uppercase;letter-spacing:.3px;margin-right:16px;
}
.status-paid{background:rgba(52,168,83,.12);color:var(--success)}
.status-pending{background:rgba(251,188,5,.15);color:var(--warning)}
.status-overdue{background:rgba(234,67,53,.15);color:var(--error)}
.invoice-actions{display:flex;gap:8px}
.action-btn{
  width:32px;height:32px;border:none;border-radius:50%;
  background:var(--panel-2); color:var(--muted); display:flex;align-items:center;justify-content:center; cursor:pointer; transition:var(--t);
}
.action-btn:hover{background:var(--primary);color:#fff;transform:scale(1.06)}

/* Tables */
.invoice-table-container{overflow-x:auto}
.invoice-table{width:100%;border-collapse:collapse;background:var(--panel)}
.invoice-table th{
  background:var(--panel-2); color:var(--primary);
  padding:16px; text-align:left; font-weight:900; border-bottom:1px solid var(--border);
}
.invoice-table td{padding:14px 16px;border-bottom:1px solid var(--border);color:var(--text)}
.invoice-table tr:hover{background:var(--panel-2)}

/* Quick actions */
.action-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:24px}
.quick-action-btn{
  display:flex;flex-direction:column;align-items:center;gap:8px;
  padding:18px;border:1px solid var(--border);border-radius:var(--r8);
  background:var(--panel-2); cursor:pointer; transition:var(--t)
}
.quick-action-btn:hover{background:var(--primary);color:#fff;transform:translateY(-2px);box-shadow:var(--shadow-2)}
.quick-action-btn i{font-size:22px}

/* Inventory stats */
.inventory-stats{display:flex;gap:20px;margin-bottom:24px}
.inventory-stat{
  display:flex;gap:12px;align-items:center;flex:1;
  background:var(--panel); padding:20px; border-radius:var(--r12); box-shadow:var(--shadow-1);
}
.inventory-stat i{color:var(--primary)}
.inventory-stat h3{font-weight:900;color:var(--text)}
.inventory-stat p{color:var(--muted)}

/* Grids */
.product-grid, .client-grid{display:grid;gap:20px;padding:24px}
.product-grid{grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
.client-grid{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}
.product-card, .client-card{
  background:var(--panel); border:1px solid var(--border); border-radius:var(--r8); padding:20px; transition:var(--t)
}
.product-card:hover, .client-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-2)}

/* Settings */
.settings-content{display:grid;gap:24px}
.settings-card{background:var(--panel);border-radius:var(--r12);padding:24px;box-shadow:var(--shadow-1)}
.settings-card h2{display:flex;align-items:center;gap:10px;color:var(--primary);font-weight:900;font-size:18px;margin-bottom:16px}
.settings-card h2 i{color:var(--primary)}
.logo-upload-container{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
.logo-preview{
  width:100px;height:100px;border:2px dashed var(--border);border-radius:var(--r8);
  display:flex;flex-direction:column;gap:6px;align-items:center;justify-content:center;color:var(--muted);font-size:12px;
}
.logo-preview i{opacity:.7}

/* Searchable dropdowns */
.searchable-dropdown{position:relative;width:100%}
.dropdown-list{
  position:absolute; top:calc(100% + 4px); left:0; right:0;
  background:var(--panel); border:1px solid var(--border); border-radius:var(--r8);
  box-shadow:var(--shadow-2); max-height:240px; overflow-y:auto; z-index:1000; display:none;
}
.dropdown-item{padding:10px 14px;border-bottom:1px solid var(--border);cursor:pointer;transition:var(--t)}
.dropdown-item:last-child{border-bottom:none}
.dropdown-item:hover,.dropdown-item:focus{background:var(--panel-2);outline:none}
.dropdown-item-main{font-weight:800;color:var(--text)}
.dropdown-item-sub{font-size:12px;color:var(--muted);margin-top:2px}
.dropdown-item.add-new{background:rgba(66,133,244,.08);color:var(--primary);font-weight:800}
.dropdown-item.add-new:hover{background:rgba(66,133,244,.14)}

/* Invoice modal — single-line item row */
.invoice-items{margin:20px 0}
.invoice-items h3{font-size:16px;font-weight:900;color:var(--text);margin-bottom:12px}

.item-row{margin-bottom:12px}
.item-row-inline{
  display:grid;
  grid-template-columns: 2.2fr 90px 110px 120px 100px 38px; /* name | qty | unit | rate | total | remove */
  gap:12px; align-items:center;
}
.item-row-inline .form-input{width:100%}
.unit-input{ text-transform:lowercase; }

.item-total{ text-align:right; font-weight:900; color:var(--text); }
.remove-item{
  width:36px;height:36px;border:none;border-radius:50%;
  background:transparent;color:var(--error);cursor:pointer;transition:var(--t)
}
.remove-item:hover{background:rgba(234,67,53,.12)}

/* Invoice summary and tax controls */
.invoice-summary{margin-top:20px;padding-top:16px;border-top:1px solid var(--border);display:grid;gap:10px}
.summary-row{display:flex;align-items:center;justify-content:space-between;color:var(--text)}
.summary-row.tax-discount{justify-content:flex-start;gap:12px}
.summary-row.tax-discount label{display:inline-flex;align-items:center;gap:6px;color:var(--text)}
.summary-row.total{font-size:18px;font-weight:900;border-top:1px solid var(--border);padding-top:10px}

/* Global default tax controls area (Invoices header) */
.tax-settings{display:inline-flex;align-items:center;gap:12px}
.tax-settings input[type="number"]{width:120px}
.tax-settings label{display:inline-flex;align-items:center;gap:8px;color:var(--text)}

/* Modals */
.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.5); backdrop-filter:blur(4px); z-index:2000;
}
.modal.active{display:flex}
.modal-content{
  background:var(--panel); border-radius:var(--r12); box-shadow:var(--shadow-3);
  width:92%; max-width:720px; max-height:84vh; overflow-y:auto;
  animation:modalIn .25s ease-out;
}
.modal-content.small-modal{max-width:420px}
@keyframes modalIn{from{opacity:0;transform:translateY(-10px) scale(.98)}to{opacity:1;transform:none}}
.modal-header{padding:18px 22px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.modal-header h2{display:flex;align-items:center;gap:10px;color:var(--primary);font-weight:900;font-size:18px}
.modal-close{
  width:36px;height:36px;border:none;border-radius:50%;
  background:transparent;color:var(--muted);cursor:pointer;transition:var(--t)
}
.modal-close:hover{background:var(--panel-2);color:var(--text)}
.modal-body{padding:20px 22px}
.modal-footer{padding:14px 22px;border-top:1px solid var(--border);background:var(--panel-2);display:flex;justify-content:flex-end;gap:12px}

/* WhatsApp share options */
.share-options{display:grid;gap:12px}
.share-option-btn{
  position:relative;display:flex;align-items:center;gap:12px;
  padding:16px;background:var(--panel-2);border:1px solid var(--border);
  border-radius:var(--r8);cursor:pointer;transition:var(--t)
}
.share-option-btn:hover{background:var(--primary);color:#fff;transform:translateY(-1px);box-shadow:var(--shadow-2)}
.share-option-btn i{font-size:20px}
.share-option-btn small{color:var(--muted)}
.share-option-btn:hover small{color:rgba(255,255,255,.9)}
.new-badge{
  position:absolute;top:-6px;right:-6px;background:var(--error);
  color:#fff;font-size:10px;font-weight:900;padding:2px 6px;border-radius:10px;letter-spacing:.4px;
}

/* Hidden invoice image template */
.invoice-template{
  position:absolute; top:-9999px; left:-9999px;
  background:#ffffff; color:#202124;
  font-family:'Product Sans', Arial, sans-serif;
}

/* Loading and toasts */
.loading-spinner{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center; flex-direction:column; gap:12px;
  background:rgba(255,255,255,.9); color:var(--text); z-index:3000;
}
.loading-spinner.active{display:flex}
.spinner{
  width:40px;height:40px;border:4px solid var(--border);border-top:4px solid var(--primary);
  border-radius:50%; animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

.toast-container{position:fixed;top:20px;right:20px;z-index:4000;display:flex;flex-direction:column;gap:8px}
.toast{
  background:var(--panel); color:var(--text); padding:14px 18px; border-radius:var(--r8);
  box-shadow:var(--shadow-3); display:flex; gap:10px; align-items:center; min-width:300px;
  animation:toastIn .25s ease-out;
}
@keyframes toastIn{from{opacity:0;transform:translateX(30px)}to{opacity:1;transform:none}}
.toast.success{border-left:4px solid var(--success)}
.toast.error{border-left:4px solid var(--error)}
.toast.warning{border-left:4px solid var(--warning)}
.toast-icon{color:var(--primary)}
.toast-message{flex:1}
.toast-close{border:none;background:transparent;color:var(--muted);cursor:pointer;font-size:18px}

/* Accessibility */
.btn:focus, .form-input:focus, .nav-link:focus, .action-btn:focus, .dropdown-item:focus{
  outline:2px solid var(--primary); outline-offset:2px;
}
.btn:focus:not(:focus-visible), .form-input:focus:not(:focus-visible), .nav-link:focus:not(:focus-visible){outline:none}

/* Scrollbars */
::-webkit-scrollbar{width:8px;height:8px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:var(--muted)}

/* Responsive */
@media (max-width:1024px){
  .dashboard-content{grid-template-columns:1fr}
  .stats-grid{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
  .item-row-inline{grid-template-columns:2fr 80px 100px 110px 90px 34px}
}
@media (max-width:768px){
  .main-content{padding:16px}
  .section-header{flex-direction:column;align-items:flex-start;gap:12px}
  .section-actions{width:100%;flex-wrap:wrap}
  .search-box.search-elevated{min-width:unset;width:100%}
  .product-grid,.client-grid{grid-template-columns:1fr;padding:20px}
  .item-row-inline{
    grid-template-columns:1fr; gap:10px; padding:12px;
    background:var(--panel-2); border-radius:var(--r8);
  }
  .modal-content{width:95%;margin:16px}
}
@media (max-width:480px){
  .logo-text{font-size:18px}
  .section-title{font-size:22px}
  .card-header{padding:16px}
  .invoice-item{padding:12px 16px;flex-wrap:wrap}
  .invoice-amount,.invoice-status{margin-top:8px;margin-right:0}
  .toast{min-width:260px}
}

/* Print */
@media print{
  .header,.section-actions,.action-btn,.modal,.toast-container,.loading-spinner{display:none!important}
  .main-content{padding:0}
  .card{box-shadow:none;border:1px solid var(--border)}
  .invoice-template{position:static!important;display:block!important}
}
